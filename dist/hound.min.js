!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("../models/container/MHPagedResponse.js")):"function"==typeof define&&define.amd?define("HoundJS",["../models/container/MHPagedResponse.js"],e):t.HoundJS=e(t.___models_container_MHPagedResponse_js)}(this,function(t){"use strict";var e={};e["typeof"]=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},e.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),e.get=function de(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:de(o,e,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},e.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},e.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};var n,r={log:!1,warn:!0,error:!0},o=function(){return"undefined"!=typeof window?window.mhDebug&&"local.mediahound.com:2014"===window.location.host:!1},i=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];"boolean"!=typeof t&&(n.unshift(t),t=!1),console&&console.log&&(t||r.log||o())&&console.log.apply(console,arguments)},s=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];"boolean"!=typeof t&&(n.unshift(t),t=!1),console&&console.warn&&(t||r.warn||o())&&console.warn.apply(console,n)},u=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];"boolean"!=typeof t&&(n.unshift(t),t=!1),console&&console.error&&(t||r.error||o())&&console.error.apply(console,n)},a=Symbol("keymap"),c=function(){function t(n){e.classCallCheck(this,t),this.size=0,this.limit=n,this[a]={}}return e.createClass(t,[{key:"put",value:function(t,e,n){var r={key:t,value:e,altId:n};return i("putting: ",r),this[a][t]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit?this.shift():void this.size++}},{key:"putMHObj",value:function(t){return t&&t.metadata.mhid&&t.metadata.username?this.put(t.metadata.mhid,t,t.metadata.username):t&&t.metadata.mhid?this.put(t.metadata.mhid,t,t.metadata.altId):void 0}},{key:"shift",value:function(){var t=this.head;return t&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,t.newer=t.older=void 0,delete this[a][t.key]),t}},{key:"get",value:function(t){var e=this[a][t];if(void 0!==e)return e===this.tail?(i("getting from cache (is tail): ",e),e.value):(e.newer&&(e===this.head&&(this.head=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.tail,this.tail&&(this.tail.newer=e),this.tail=e,i("getting from cache: ",e),e.value)}},{key:"getByAltId",value:function(t){for(var e=this.tail;e;){if(e.altId===t)return i("found altId "+t+", getting from cache"),this.get(e.key);e=e.older}}},{key:"find",value:function(t){return this[a][t]}},{key:"has",value:function(t){return void 0!==this[a][t]}},{key:"hasAltId",value:function(t){for(var e=this.tail;e;){if(e.altId===t)return!0;e=e.older}return!1}},{key:"remove",value:function(t){var e=this[a][t];if(e)return delete this[a][e.key],e.newer&&e.older?(e.older.newer=e.newer,e.newer.older=e.older):e.newer?(e.newer.older=void 0,this.head=e.newer):e.older?(e.older.newer=void 0,this.tail=e.older):this.head=this.tail=void 0,this.size--,e.value}},{key:"removeAll",value:function(){this.head=this.tail=void 0,this.size=0,this[a]={}}},{key:"keys",value:function(){return Object.keys(this[a])}},{key:"forEach",value:function(t){if("function"==typeof t)for(var e=this.head,n=0;e;)t(e.value,n,this),n++,e=e.newer}},{key:"saveToLocalStorage",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"mhLocalCache":arguments[0],e=[],n=this.head,r=function(t,e){return/promise|request/gi.test(t)?void 0:e};for(i("saving to localStorage");n;)i("adding to arry: ",JSON.stringify(n.value,r)),e.push(JSON.stringify(n.value,r)),n=n.newer;i("adding to localStorage: ",JSON.stringify(e)),localStorage[t]=JSON.stringify(e)}},{key:"restoreFromLocalStorage",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"mhLocalCache":arguments[0],e=System.get("../../src/models/base/MHObject.js").MHObject;if(!localStorage||"undefined"==typeof localStorage[t])return void i("nothing stored");for(var n,r=0,o=JSON.parse(localStorage[t]);r<o.length;r++)n=e.create(o[r]),n&&!this.has(n.metadata.mhid)&&(i("adding to cache: ",n),this.putMHObj(n))}}]),t}();if("undefined"!=typeof window){if(!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest))throw new Error("No XMLHttpRequest 2 Object found, please update your browser.");n=window}else"undefined"==typeof window&&(n=require("xmlhttprequest-cookie"));var l=function(t){return encodeURIComponent(t).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},h=function(t){var e,r=t.method||"GET",o=t.url||null,i=t.params||null,s=t.data||null,u=t.headers||null,a=void 0!==t.withCredentials?t.withCredentials:!0,c=t.onprogress||null,h=new n.XMLHttpRequest;if(null===o)throw new TypeError("url was null or undefined in arguments object","promiseRequest.js",70);if(null!==i){-1===o.indexOf("?")&&(o+="?");for(e in i)if(i.hasOwnProperty(e))if("?"!==o[o.length-1]&&(o+="&"),"string"==typeof i[e]||i[e]instanceof String)o+=encodeURIComponent(e)+"="+l(i[e]).replace("%20","+");else if(Array.isArray(i[e])||i[e]instanceof Array){var f=!0,g=!1,d=void 0;try{for(var p,m=i[e][Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;o+=encodeURIComponent(e)+"="+l(y).replace("%20","+"),o+="&"}}catch(b){g=!0,d=b}finally{try{!f&&m["return"]&&m["return"]()}finally{if(g)throw d}}i[e].length>0&&(o=o.slice(0,-1))}else o+=encodeURIComponent(e)+"="+l(JSON.stringify(i[e])).replace("%20","+");e=null}if(s&&("string"==typeof s||s instanceof String||s instanceof ArrayBuffer||"undefined"!=typeof FormData&&s instanceof FormData||"undefined"!=typeof Blob&&s instanceof Blob||(s=JSON.stringify(s),null==u?u={"Content-Type":"application/json"}:u["Content-Type"]||u["content-type"]||u["Content-type"]||u["content-Type"]||(u["Content-Type"]="application/json"))),h.open(r,o,!0),h.withCredentials=a,null!==u)for(e in u)u.hasOwnProperty(e)&&h.setRequestHeader(e,u[e]);return new Promise(function(t,e){h.onreadystatechange=function(){4===this.readyState?this.status>=200&&this.status<300?t(this):e({error:new Error("Request failed with status: "+this.status+", "+this.statusText),xhr:this}):3===this.readyState?"function"==typeof c&&c(this.responseText):2===this.readyState||1===this.readyState||0===this.readyState},h.addEventListener("abort",function(){console.log("Request to "+o+" aborted with status: "+this.status+", "+this.statusText)},!1),null!==s?h.send(s):h.send()})};Object.defineProperty(h,"extraEncode",{configurable:!1,enumerable:!1,get:function(){return l}});var f=h.extraEncode,g={headers:{Accept:"application/json"},withCredentials:!0},d=function(t){return t?null!=t.responseText&&""!==t.responseText?JSON.parse(t.responseText):null!=t.response&&"string"==typeof t.response&&""!==t.response?JSON.parse(t.response):t.status:t},p=function(t){if(!t)throw new TypeError("Arguments not specified for houndRequest","houndRequest.js",27);if("string"==typeof t.method&&/[a-z]/.test(t.method)&&(t.method=t.method.toUpperCase()),t.method&&"POST"===t.method&&(g.withCredentials=!0),t.endpoint&&(t.url=C.origin+t.endpoint,delete t.endpoint),C.MHAccessToken&&(t.params?t.params.access_token=C.MHAccessToken:t.params={access_token:C.MHAccessToken}),t.headers){var e;for(e in g.headers)!g.headers.hasOwnProperty(e)||e in t.headers||(t.headers[e]=g.headers[e])}else t.headers=g.headers;return null==t.withCredentials&&(t.withCredentials=g.withCredentials),h(t).then(d)};Object.defineProperty(p,"extraEncode",{configurable:!1,enumerable:!1,get:function(){return f}});var m=null,y=null,b=null,v="https://api-v11.mediahound.com/",C=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"configure",value:function(t,e,n){return y=t,b=e,n&&(v=n),this.refreshOAuthToken()}},{key:"refreshOAuthToken",value:function(){return p({endpoint:"cas/oauth2.0/accessToken",params:{client_id:y,client_secret:b,grant_type:"client_credentials"}}).then(function(t){m=t.accessToken})}},{key:"MHAccessToken",get:function(){return m}},{key:"origin",get:function(){return v}}]),t}(),k=function pe(t,n){var r=null;if("object"===("undefined"==typeof n?"undefined":e["typeof"](n))){if(n)if(n instanceof Array){var o=n[0];null!==t&&void 0!==t&&(r=t.map(function(t){try{return pe(t,o)}catch(e){return console.log(e),t}}))}else n.mapper&&"function"==typeof n.mapper&&(r=null!==t&&void 0!==t?n.mapper(t):null)}else n===String?r=null!==t&&void 0!==t?String(t):null:n===Number?(r=null!==t&&void 0!==t?Number(t):null,Number.isNaN(r)&&(r=null)):n===Boolean?r=null!==t&&void 0!==t?Boolean(t):null:n===Object?r=t||null:n===Date?(r=new Date(1e3*t),r=isNaN(r)?null:"Invalid Date"===r?null:new Date(r.valueOf()+6e4*r.getTimezoneOffset())):"function"==typeof n&&(r=null!==t&&void 0!==t?new n(t):null);return r},O=function(t,e,n,r,o,i){if(!e[n]){var s=t[n],u=k(s,r);if(!o&&!u)throw TypeError("non-optional field `"+n+"` found null value. Args:",t);void 0!==u&&(i?e[n]=u:Object.defineProperty(e,n,{configurable:!1,enumerable:!0,writable:!0,value:u}))}},j=function(t,n,r){var o=n.jsonProperties;for(var i in o)if(o.hasOwnProperty(i)){var s,u=o[i],a=!0;"object"===("undefined"==typeof u?"undefined":e["typeof"](u))?(void 0!==u.type?s=u.type:void 0!==u.mapper?s=u:u instanceof Array&&(s=u),void 0!==u.optional&&(a=u.optional)):s=u,O(t,n,i,s,a,r)}},w=function(t,e){j(t,e,!1)},P=function(t,e){j(t,e,!0)},S=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"isEqualToMHSocial",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=Object.keys(this.jsonProperties)[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=o.value;if(("number"!=typeof this[s]||"number"!=typeof t[s]||this[s]!==t[s])&&(this[s]||t[s]))return!1}}catch(u){n=!0,r=u}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}return!0}},{key:"newWithAction",value:function(e){var n,r,o,i={};switch(e){case t.LIKE:r="likers",n=this.likers+1,o="userLikes";break;case t.UNLIKE:r="likers",n=this.likers-1,o="userLikes";break;case t.DISLIKE:case t.UNDISLIKE:o="userDislikes";break;case t.FOLLOW:r="followers",n=this.followers+1,o="userFollows";break;case t.UNFOLLOW:r="followers",n=this.followers-1,o="userFollows";break;case t.COLLECT:r="collectors",n=this.collectors+1}var s=!0,u=!1,a=void 0;try{for(var c,l=Object.keys(this.jsonProperties)[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;h===r?i[h]=n:h===o?i[h]=!this[h]:i[h]=this[h]}}catch(f){u=!0,a=f}finally{try{!s&&l["return"]&&l["return"]()}finally{if(u)throw a}}return new t(i)}},{key:"jsonProperties",get:function(){return{likers:Number,followers:Number,collectors:Number,mentioners:Number,following:Number,ownedCollections:Number,items:Number,userLikes:Boolean,userDislikes:Boolean,userFollows:Boolean,isFeatured:Boolean,userConnected:Boolean,userPreference:Boolean}}}],[{key:"LIKE",get:function(){return"like"}},{key:"UNLIKE",get:function(){return"unlike"}},{key:"DISLIKE",get:function(){return"dislike"}},{key:"UNDISLIKE",get:function(){return"undislike"}},{key:"FOLLOW",get:function(){return"follow"}},{key:"UNFOLLOW",get:function(){return"unfollow"}},{key:"SOCIAL_ACTIONS",get:function(){return[t.LIKE,t.UNLIKE,t.DISLIKE,t.UNDISLIKE,t.FOLLOW,t.UNFOLLOW]}},{key:"POST",get:function(){return"post"}},{key:"COLLECT",get:function(){return"collect"}},{key:"COMMENT",get:function(){return"comment"}}]),t}(),E=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{url:String,width:Number,height:Number}}}]),t}(),M=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{mhid:{type:String,optional:!1},altId:String,name:String,description:String,createdDate:Date}}}]),t}(),T=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{releaseDate:Date})}}]),n}(M),R=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{username:{type:String,optional:!1},email:String})}}]),n}(M),H=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{mixlist:String})}}]),n}(M),x=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{message:String})}}]),n}(M),U=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{isDefault:Boolean,averageColor:String,thumbnail:E,small:E,medium:E,large:E,original:E})}}]),n}(M),I=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{timePeriod:String,price:String,currency:String,mediums:String})}}]),n}(M),N=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{connectable:Boolean})}}]),n}(M),A=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),n}(M),L=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),n}(M),F=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),n}(M),_={},B={},G=new c(1e3);"undefined"!=typeof window&&"local.mediahound.com:2014"===window.location.host&&(window.mhidLRU=G);var D=Symbol("lastSocialRequestId"),W=Symbol("social"),K=function(){function n(t){e.classCallCheck(this,n),w(t,this),this.cachedResponses={}}return e.createClass(n,[{key:"isEqualToMHObject",value:function(t){return t&&t.metadata.mhid?this.metadata.mhid===t.metadata.mhid:!1}},{key:"hasMhid",value:function(t){return"string"==typeof t||t instanceof String?this.metadata.mhid===t:!1}},{key:"toString",value:function(){return this.className+" with mhid "+this.metadata.mhid+" and name "+this.mhName}},{key:"mergeWithData",value:function(t){P(t,this)}},{key:"subendpoint",value:function(t){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("Sub not of type string or undefined in (MHObject).subendpoint.");return this.endpoint+"/"+t}},{key:"fetchSocial",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=this.subendpoint("social");return!e&&this.social instanceof S?Promise.resolve(this.social):p({method:"GET",endpoint:n}).then(function(e){return t.social=new S(e)}.bind(this))["catch"](function(t){console.warn("fetchSocial:",t)})}},{key:"fetchFeed",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("feed");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchImages",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?20:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("images");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchCollections",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=this.subendpoint("collections");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchBaseTraits",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?20:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("baseTraits");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"takeAction",value:function(t){var e=this;if("string"!=typeof t&&!(t instanceof String))throw new TypeError("Action not of type String or undefined");if(!S.SOCIAL_ACTIONS.some(function(e){return t===e}))throw new TypeError("Action is not of an accepted type in mhObj.takeAction");i("in takeAction, action: "+t+", obj: "+this.toString());var n=this.subendpoint(t),r=Math.random(),o=this.social,s=this;return this.social instanceof S&&(this.social=this.social.newWithAction(t)),this[D]=r,p({method:"PUT",endpoint:n}).then(function(t){var n=new S(t.social);return e[D]===r&&(s.social=n),n})["catch"](function(t){throw e[D]===r&&(s.social=o),t})}},{key:"responseCacheKeyForPath",value:function(t){return"__cached_"+t}},{key:"cachedResponseForPath",value:function(t){var e=this.responseCacheKeyForPath(t);return this.cachedResponses[e]}},{key:"setCachedResponse",value:function(t,e){var n=this.responseCacheKeyForPath(e);this.cachedResponses[n]=t}},{key:"fetchPagedEndpoint",value:function(e,n,r,o){var i=this,s=arguments.length<=4||void 0===arguments[4]?null:arguments[4];if(!o&&!s){var u=this.cachedResponseForPath(e);if(u)return u}var a;a=p(s?{method:"GET",url:s}:{method:"GET",endpoint:e,params:{pageSize:r,view:n}});var c=a.then(function(s){var u=new t.MHPagedResponse(s);return u.fetchNextOperation=function(t){return i.fetchPagedEndpoint(e,n,r,o,t)},u});return s||this.setCachedResponse(c,e),c}},{key:"jsonProperties",get:function(){return{metadata:M,primaryImage:{mapper:n.create},secondaryImage:{mapper:n.create},social:S}}},{key:"social",get:function(){return this[W]||null},set:function(t){return t instanceof S&&(this[W]=t),this.social}},{key:"type",get:function(){return n.isType(this)}},{key:"className",get:function(){return this.constructor.mhName}},{key:"endpoint",get:function(){return this.constructor.rootEndpoint+"/"+this.metadata.mhid}}],[{key:"create",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(t instanceof Array)return i("trying to create MHObject that is new: "+t),t.map(function(t){try{return n.create(t)}catch(e){return u(e),t}});try{t.mhid&&void 0===t.metadata&&(t.metadata={mhid:t.mhid,altId:t.altId,name:t.name});var r,o=t.metadata.mhid||t.mhid||void 0;if("undefined"!==o&&null!==o&&t instanceof Object){if(t.mhid=o,G.has(t.metadata.mhid)||G.has(t.mhid)){i("getting from cache in create: "+t.metadata.mhid);var a=G.get(t.metadata.mhid);return a&&a.mergeWithData(t),a}var c=n.getPrefixFromMhid(o);return i(c,new _[c](t)),r=new _[c](t),e&&G.putMHObj(r),r}return r=t}catch(l){return console.log(l),console.log(l.stack),l instanceof TypeError&&("undefined is not a function"===l.message&&s("Unknown mhid prefix, see args object: ",t),"Args was object without mhid!"===l.message),null}return null}},{key:"registerConstructor",value:function(t,e){t.mhName=e;var n=t.mhidPrefix;return"undefined"==typeof n||null===n||n in _?!1:(Object.defineProperty(_,n,{configurable:!1,enumerable:!0,writable:!1,value:t}),!0)}},{key:"getPrefixFromMhid",value:function(t){for(var e in _)if(_.hasOwnProperty(e)&&new RegExp("^"+e).test(t))return e;return null}},{key:"getClassNameFromMhid",value:function(t){var e=n.getPrefixFromMhid(t);return _[e]?_[e].mhName:null}},{key:"isMedia",value:function(t){return t instanceof System.get("models/media/MHMedia.js").MHMedia}},{key:"isContributor",value:function(t){return t instanceof System.get("models/contributor/MHContributor.js").MHContributor}},{key:"isAction",value:function(t){return t instanceof System.get("models/action/MHAction.js").MHAction}},{key:"isUser",value:function(t){return t instanceof System.get("models/user/MHUser.js").MHUser}},{key:"isCollection",value:function(t){return t instanceof System.get("models/collection/MHCollection.js").MHCollection}},{key:"isImage",value:function(t){return t instanceof System.get("models/image/MHImage.js").MHImage}},{key:"isTrait",value:function(t){return t instanceof System.get("models/trait/MHTrait.js").MHTrait}},{key:"isSource",value:function(t){return t instanceof System.get("models/source/MHSource.js").MHSource}},{key:"isType",value:function(t){var e="";return e=n.isAction(t)?"MHAction":n.isMedia(t)?"MHMedia":n.isImage(t)?"MHImage":n.isCollection(t)?"MHCollection":n.isUser(t)?"MHUser":n.isContributor(t)?"MHContributor":n.isSource(t)?"MHSource":n.isTrait(t)?"MHTrait":null}},{key:"enterWithMappedSourceIds",value:function(t){var e="graph/enter/raw",n={ids:t};return p({method:"GET",endpoint:e,params:n})}},{key:"fetchByMhid",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"full":arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if("string"!=typeof t&&!(t instanceof String))throw TypeError("MHObject.fetchByMhid argument must be type string.");if((null===e||void 0===e)&&(e="full"),i("in fetchByMhid, looking for: ",t,"with view = ",e),!r&&G.has(t))return Promise.resolve(G.get(t));if(!r&&G.hasAltId(t))return Promise.resolve(G.getByAltId(t));var o,u=n.getPrefixFromMhid(t),a=_[u];if(null===u||"undefined"==typeof a)throw s("Error in MHObject.fetchByMhid",t,u,a),Error("Could not find correct class, unknown mhid: "+t);return p({method:"GET",endpoint:a.rootEndpoint+"/"+t,params:{view:e}}).then(function(t){return o=n.create(t)})}},{key:"rootEndpointForMhid",value:function(t){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("Mhid not of type string or undefined in rootEndpointForMhid");var e=n.getPrefixFromMhid(t),r=_[e];if(null===e||"undefined"==typeof r)throw s("Error in MHObject.rootEndpointForMhid",t,e,r),new Error("Could not find correct class, unknown mhid: "+t);return r.rootEndpoint}},{key:"rootSubendpoint",value:function(t){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("Sub not of type string or undefined in (MHObject).rootSubendpoint.");return this.rootEndpoint+"/"+t}},{key:"rootResponseCacheKeyForPath",value:function(t,e){return"___root_cached_"+t+"_"+JSON.stringify(e,function(t,e){return"view"!==t&&"pageSize"!==t&&"access_token"!==t?e:void 0})}},{key:"cachedRootResponseForPath",value:function(t,e){var n=this.rootResponseCacheKeyForPath(t,e);return B[n]}},{key:"setCachedRootResponse",value:function(t,e,n){var r=this.rootResponseCacheKeyForPath(e,n);B[r]=t}},{key:"fetchRootPagedEndpoint",value:function(t,e,n,r,o){var i=this,s=arguments.length<=5||void 0===arguments[5]?null:arguments[5];if(!o&&!s){var u=this.cachedRootResponseForPath(t,e);if(u)return u}var a;s?a=p({method:"GET",url:s}):(e.view=n,e.pageSize=r,a=p({method:"GET",endpoint:t,params:e}));var c=a.then(function(s){var u=System.get("models/container/MHPagedResponse.js").MHPagedResponse,a=new u(s);return a.fetchNextOperation=function(s){return i.fetchRootPagedEndpoint(t,e,n,r,o,s)},a});return s||this.setCachedRootResponse(c,t,e),c}},{key:"prefixes",get:function(){return Object.keys(_)}},{key:"mhidPrefix",get:function(){return null}},{key:"rootEndpoint",get:function(){return null}}]),n}(),q=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:x,primaryOwner:{mapper:K.create},primaryMention:{mapper:K.create}})}}],[{key:"rootEndpoint",get:function(){return"graph/action"}}]),n}(K),J=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhadd"}}]),n}(q);!function(){K.registerConstructor(J,"MHAdd")}();var Y=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhcmt"}}]),n}(q);!function(){K.registerConstructor(Y,"MHComment")}();var z=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhcrt"}}]),n}(q);!function(){K.registerConstructor(z,"MHCreate")}();var X=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhlke"}}]),n}(q);!function(){K.registerConstructor(X,"MHLike")}();var V=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhflw"}}]),n}(q);!function(){K.registerConstructor(V,"MHFollow")}();var Q=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"createWithMessage",value:function(t,e,n){if(!(t&&e&&n&&"string"==typeof t&&Array.isArray(e)&&e.every(function(t){return t instanceof K})&&n instanceof K))throw new TypeError("Can't create post without message string, mentions array, and primary mention object.");var r=this.rootSubendpoint("new"),o=e.map(function(t){return t.metadata.mhid});return p({method:"POST",endpoint:r,data:{message:t,mentions:o,primaryMention:n.metadata.mhid}}).then(function(t){return e.forEach(function(t){return t.fetchSocial(!0)}),t})}},{key:"mhidPrefix",get:function(){return"mhpst"}}]),n}(q);!function(){K.registerConstructor(Q,"MHPost")}();var $=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:L})}}],[{key:"fetchByName",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"full":arguments[1];if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Hashtag not of type String in fetchByTag");var n=this.rootSubendpoint("/lookup/"+t);return p({method:"GET",endpoint:n,params:{view:e}}).then(function(t){var e=K.create(t);return e})}},{key:"mhidPrefix",get:function(){return"mhhtg"}},{key:"rootEndpoint",get:function(){return"graph/hashtag"}}]),n}(K);!function(){K.registerConstructor($,"MHHashtag")}();var Z=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{type:String,price:String,currency:String,timePeriod:String,launchInfo:Object,contentCount:Number}}},{key:"displayPrice",get:function(){return"$"+this.price}}]),t}(),tt=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"formatForType",value:function(t){return this.formats.filter(function(e){return e.type===t})[0]}},{key:"jsonProperties",get:function(){return{type:String,formats:[Z]}}}],[{key:"TYPE_PURCHASE",get:function(){return"purchase"}},{key:"TYPE_RENTAL",get:function(){return"rental"}},{key:"TYPE_SUBSCRIPTION",get:function(){return"subscription"}},{key:"TYPE_ADSUPPORTED",get:function(){return"adSupported"}}]),t}(),et=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"methodForType",value:function(t){return this.methods.filter(function(e){return e.type===t})[0]}},{key:"jsonProperties",get:function(){return{type:String,methods:[tt]}}}],[{key:"TYPE_STREAM",get:function(){return"stream"}},{key:"TYPE_DOWNLOAD",get:function(){return"download"}},{key:"TYPE_DELIVER",get:function(){return"deliver"}},{key:"TYPE_PICKUP",get:function(){return"pickup"}},{key:"TYPE_ATTEND",get:function(){return"attend"}}]),t}(),nt=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{contribution:String,role:String,object:{mapper:K.create}}}}]),t}(),rt=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{importance:Number,position:Number}}}]),t}(),ot=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{consumable:Boolean,sorting:rt,relationships:[nt],mediums:[et]}}}]),t}(),it=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{context:ot,object:{mapper:K.create}}}}]),t}(),st=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"setPassword",value:function(t,e){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("password must be type string in MHUser.newPassword");if(!e||"string"!=typeof e&&!(e instanceof String))throw new TypeError("newPassword must be type string in MHUser.newPassword");var n=this.subendpoint("updatePassword");return p({method:"POST",endpoint:n,withCredentials:!0,data:{oldPassword:t,newPassword:e}}).then(function(t){return console.log("valid password: ",t),t})["catch"](function(n){return 400===n.xhr.status?console.error("The password "+t+" is an invalid password."):404===n.xhr.status?console.error("The newPassword "+e+" was not found."):(console.log("error in setPassword: ",n.error.message),console.error(n.error.stack)),!1})}},{key:"setProfileImage",value:function(t){if(i("in setProfileImage with image: ",t),!t)throw new TypeError("No Image passed to setProfileImage");
if(!(t instanceof Blob||t instanceof File))throw new TypeError("Image was not of type Blob or File.");if(!this.isCurrentUser)throw function(){var t=function(t){this.name="NoMHSessionError",this.message=t||""};return t.prototype=Object.create(Error.prototype),t.constructor=t,new t("No valid user session. Please log in to change profile picture")}();var e=this.subendpoint("uploadImage"),n=new FormData;return n.append("data",t),i("path: ",e,"image: ",t,"form: ",n),p({method:"POST",endpoint:e,withCredentials:!0,data:n}).then(function(t){return t})}},{key:"fetchInterestFeed",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("interestFeed");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchOwnedCollections",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=this.subendpoint("ownedCollections");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchSuggested",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("suggested");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchFollowing",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("following");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchFollowers",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("followers");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchServiceSettings",value:function(t){var e=t||null,n=this.subendpoint("settings");return null===e?(console.warn("No service provided, aborting. First argument must include service name i.e. 'facebook' or 'twitter'."),!1):p({method:"GET",endpoint:n+"/"+e,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})["catch"](function(t){console.error(t)}).then(function(t){return void 0===t?500:t})}},{key:"fetchTwitterFollowers",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("settings")+"/twitter/friends";return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchFacebookFriends",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("settings")+"/facebook/friends";return this.fetchPagedEndpoint(r,t,e,n)}},{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:R})}},{key:"isCurrentUser",get:function(){var t=System.get("../../src/models/user/MHLoginSession.js").MHLoginSession.currentUser;return this.isEqualToMHObject(t)}}],[{key:"registerNewUser",value:function(t,r,o,i,s,u){var a=n.rootEndpoint+"/new",c=u&&"object"===("undefined"==typeof u?"undefined":e["typeof"](u))&&!(u instanceof Array||u instanceof String)?u:{},l=function(t){return"string"!=typeof t&&!(t instanceof String)};if(l(t))throw new TypeError("Username not of type string in MHUser.registerNewUser");if(l(r))throw new TypeError("Password not of type string in MHUser.registerNewUser");if(l(o))throw new TypeError("Email not of type string in MHUser.registerNewUser");if(l(i))throw new TypeError("First name not of type string in MHUser.registerNewUser");if(l(s))throw new TypeError("Last name not of type string in MHUser.registerNewUser");return c.username=t,c.password=r,c.email=o,c.firstName=i,c.lastName=s,p({method:"POST",endpoint:a,data:c,withCredentials:!0,headers:{}}).then(function(t){return t.metadata})}},{key:"fetchSettings",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("mhid must be type string in MHUser.fetchSettings");var e=n.rootEndpoint+"/"+t+"/settings/internal";return p({method:"GET",endpoint:e}).then(function(t){return i("valid settings response: ",t),t.internalSettings})["catch"](function(t){return console.log("error in fetchSettings: ",t.error.message),console.error(t.error.stack),!1})}},{key:"fetchSourceSettings",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("mhid must be type string in MHUser.fetchSourceSettings");var e=n.rootEndpoint+"/"+t+"/settings/sources";return p({method:"GET",endpoint:e}).then(function(t){return t=it.createFromArray(t.content),console.log("valid settings response: ",t),t})["catch"](function(t){return console.log("error in fetchSourceSettings: ",t.error.message),console.error(t.error.stack),!1})}},{key:"updateSettings",value:function(t,e){if(null==e||"string"==typeof e||Array.isArray(e))throw new TypeError("Update data parameter must be of type object");if(null==e.operation||null==e.property||null==e.value)throw new TypeError("Updates must include operation, property, and value as parameters.");var r=n.rootEndpoint+"/"+t+"/settings/internal/update";return console.log(r,e),p({method:"PUT",endpoint:r,withCredentials:!0,data:e})["catch"](function(t){throw console.log("error on profile update: ",t),t})}},{key:"validateUsername",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Username must be type string in MHUser.validateUsername");var e=n.rootEndpoint+"/validate/username/"+encodeURIComponent(t);return p({method:"GET",endpoint:e}).then(function(t){return t})["catch"](function(e){return 406===e.xhr.status?console.error("The username "+t+" is already taken."):(console.log("error in validate username: ",e.error.message),console.error(e.error.stack)),!1})}},{key:"validateEmail",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Email must be type string in MHUser.validateEmail");var e=n.rootEndpoint+"/validate/email/"+encodeURIComponent(t);return p({method:"GET",endpoint:e}).then(function(t){return t})["catch"](function(e){return 406===e.xhr.status?console.error("The email "+t+" is already registered."):(console.log("error in validate username: ",e.error.message),console.error(e.error.stack)),!1})}},{key:"forgotUsernameWithEmail",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Email must be type string in MHUser.forgotUsernameWithEmail");var e=n.rootEndpoint+"/forgotusername",r={};return r.email=t,p({method:"POST",endpoint:e,withCredentials:!1,data:r}).then(function(t){return t})["catch"](function(e){return 400===e.xhr.status?console.error("The email "+t+" is missing or an invalid argument."):404===e.xhr.status?console.error("The user with the email address "+t+" was not found."):(console.log("error in new forgotUsernameWithEmail: ",e.error.message),console.error(e.error.stack)),!1})}},{key:"forgotPasswordWithEmail",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Email must be type string in MHUser.forgotPasswordWithEmail");var e=n.rootEndpoint+"/forgotpassword",r={};return r.email=t,p({method:"POST",endpoint:e,withCredentials:!1,data:r}).then(function(t){return console.log("valid forgotPasswordWithEmail: ",t),t})["catch"](function(e){return 400===e.xhr.status?console.error("The email "+t+" is missing or an invalid argument."):404===e.xhr.status?console.error("The user with the email address "+t+" was not found."):(console.log("error in new forgotPasswordWithEmail: ",e.error.message),console.error(e.error.stack)),!1})}},{key:"forgotPasswordWithUsername",value:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("username must be type string in MHUser.forgotPasswordWithUsername");var e=n.rootEndpoint+"/forgotpassword",r={};return r.username=t,p({method:"POST",endpoint:e,withCredentials:!1,data:r}).then(function(t){return console.log("valid forgotPasswordWithUsername: ",t),t})["catch"](function(e){return 400===e.xhr.status?console.error("The username "+t+" is missing or an invalid argument."):404===e.xhr.status?console.error("The user "+t+" was not found."):(console.log("error in forgotPasswordWithUsername: ",e.error.message),console.error(e.error.stack)),!1})}},{key:"newPassword",value:function(t,e){if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("password must be type string in MHUser.newPassword");if(!e||"string"!=typeof e&&!(e instanceof String))throw new TypeError("ticket must be type string in MHUser.newPassword");var r=n.rootEndpoint+"/forgotpassword/finish",o={};return o.newPassword=t,o.ticket=e,p({method:"POST",endpoint:r,withCredentials:!1,data:o}).then(function(t){return console.log("valid newPassword: ",t),t})["catch"](function(n){return 400===n.xhr.status?console.error("The password "+t+" is an invalid password."):404===n.xhr.status?console.error("The ticket "+e+" was not found."):(console.log("error in newPassword: ",n.error.message),console.error(n.error.stack)),!1})}},{key:"fetchByUsername",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"full":arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!t||"string"!=typeof t&&!(t instanceof String))throw new TypeError("Username not of type String in fetchByUsername");if(null!=K.getPrefixFromMhid(t))throw new TypeError("Passed mhid to fetchByUsername, please use MHObject.fetchByMhid for this request.");if((null===e||void 0===e)&&(e="full"),i("in fetchByUsername, looking for: "+t),!r&&G.hasAltId(t))return Promise.resolve(G.getByAltId(t));var o,s=n.rootEndpoint+"/lookup/"+t;return p({method:"GET",endpoint:s,withCredentials:!0,params:{view:e}}).then(function(t){return o=K.create(t),G.putMHObj(o),o})}},{key:"fetchFeaturedUsers",value:function(){var t=this.rootSubendpoint("featured");return p({method:"GET",endpoint:t}).then(function(t){return Promise.all(K.fetchByMhids(t))})}},{key:"linkService",value:function(t,e,r){var o=t||null,i=e||"https://www.mediahound.com/",s=r||"https://www.mediahound.com/";return null===o?(console.warn("No service provided, aborting. First argument must include service name i.e. 'facebook' or 'twitter'."),!1):p({method:"GET",endpoint:n.rootEndpoint+"/account/"+o+"/link?successRedirectUrl="+i+"&failureRedirectUrl="+s,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return console.log(t),t})}},{key:"unlinkService",value:function(t){var e=t||null;return null===e?(console.warn("No service provided, aborting. First argument must include service name i.e. 'facebook' or 'twitter'."),!1):p({method:"GET",endpoint:n.rootEndpoint+"/account/"+e+"/unlink",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return console.log(t),t})}},{key:"mhidPrefix",get:function(){return"mhusr"}},{key:"rootEndpoint",get:function(){return"graph/user"}}]),n}(K);!function(){K.registerConstructor(st,"MHUser")}();var ut=function(t,e){var n;e.bubbles=e.bubbles||!1,e.cancelable=e.cancelable||!1,e.detail=e.detail||void 0;try{n=new CustomEvent(t,e)}catch(r){n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail)}return n},at=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"create",value:function(t){return ut("mhUserLogin",{bubbles:!1,cancelable:!1,detail:{mhUser:t}})}}]),t}(),ct=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"create",value:function(t){return ut("mhUserLogout",{bubbles:!1,cancelable:!1,detail:{mhUser:t}})}}]),t}(),lt=null,ht=!1,ft=!1,gt=null,dt=function(){var t=window.sessionStorage.currentUser;return t?!0:!1},pt=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"updateCount",value:function(){return p({method:"GET",endpoint:st.rootEndpoint+"/count"}).then(function(t){return gt=t.count,t})["catch"](function(t){return s("Error fetching user count"),u(t.error.stack),gt})}},{key:"login",value:function(t,e){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("Username not of type string in MHUser.login");if("string"!=typeof e&&!(e instanceof String))throw new TypeError("Password not of type string in MHUser.login");var n=st.rootEndpoint+"/login",r={username:t,password:e};return p({method:"POST",endpoint:n,data:r,withCredentials:!0,headers:{}}).then(function(t){if(t.Error)throw new Error(t.Error);return K.fetchByMhid(t.mhid).then(function(e){return[t,e]})}).then(function(t){return t[0].access===!1?(t[1].settings={onboarded:t[0].onboarded,access:t[0].access},t[1]):st.fetchSettings(t[1].mhid).then(function(e){return t[1].settings=e,t[1]})}).then(function(t){return ft=t.access=t.settings.access,ht=t.onboarded=t.settings.onboarded,lt=t,"undefined"!=typeof window&&window.dispatchEvent(at.create(lt)),"undefined"!=typeof sessionStorage&&(sessionStorage.currentUser=JSON.stringify(lt)),i("logging in:",lt),lt})["catch"](function(t){throw new Error(t)})}},{key:"logout",value:function(){var t=document.cookie.split("; ").map(function(t){var e=t.split("=");return{key:e[0],value:e[1]}});return window.sessionStorage.currentUser=null,t.forEach(function(t){if("JSESSIONID"===t.key){var e=new Date(0).toGMTString();document.cookie=t.key+"="+t.value+"; expires="+e+"; domain=.mediahound.com"}}),void 0!==("undefined"==typeof window?"undefined":e["typeof"](window))&&window.dispatchEvent(ct.create(lt)),G.removeAll(),Promise.resolve(lt).then(function(t){return lt=null,ft=!1,ht=!1,t})}},{key:"validateOpenSession",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=st.rootEndpoint+"/validateSession";return p({method:"GET",endpoint:e,params:{view:t},withCredentials:!0,headers:{}}).then(function(t){if("undefined"==typeof window||"undefined"==typeof sessionStorage||!dt())return K.create(t.users[0]);var e=JSON.parse(window.sessionStorage.currentUser);return e.mhid===t.users[0].metadata.mhid||e.mhid===t.users[0].mhid?(ft=e.settings.access,ht=e.settings.onboarded,K.create(t.users[0])):void 0}).then(function(t){return lt=t,window.dispatchEvent(at.create(lt)),lt})["catch"](function(t){return 401===t.xhr.status&&console.log("No open MediaHound session"),t})}},{key:"currentUser",get:function(){return lt}},{key:"openSession",get:function(){return lt instanceof st}},{key:"onboarded",get:function(){return ht}},{key:"access",get:function(){return ft}},{key:"count",get:function(){return gt}}]),t}(),mt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"fetchContent",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?20:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("content");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchSources",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?20:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("sources");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchContributors",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("contributors");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchIVATrailer",value:function(){var t=this.subendpoint("ivaTrailer"),e=this.cachedResponseForPath(t);if(e)return e;var n=p({method:"GET",endpoint:t});return this.setCachedResponse(n,t),n}},{key:"fetchRelated",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("related");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchShortestDistance",value:function(t){var e=this.subendpoint("shortestPath/"+t);return p({method:"GET",endpoint:e}).then(function(t){return t.paths[0].path.length-1})["catch"](function(t){if(404===t.xhr.status)return null;throw t})}},{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:T,keyContributors:[it],primaryGroup:it})}}],[{key:"fetchRelatedTo",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"full":arguments[2],r=arguments.length<=3||void 0===arguments[3]?12:arguments[3],o=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],i=t.map(function(t){return"metadata"in t?t.metadata.mhid:t}),s=this.rootSubendpoint("related"),u={factors:JSON.stringify(i),filters:JSON.stringify(e)};return this.fetchRootPagedEndpoint(s,u,n,r,o)}},{key:"rootEndpoint",get:function(){return"graph/media"}}]),n}(K),yt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhalb"}}]),n}(mt);!function(){K.registerConstructor(yt,"MHAlbum")}();var bt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhals"}}]),n}(mt);!function(){K.registerConstructor(bt,"MHAlbumSeries")}();var vt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhath"}}]),n}(mt);!function(){K.registerConstructor(vt,"MHAnthology")}();var Ct=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhbok"}}]),n}(mt);!function(){K.registerConstructor(Ct,"MHBook")}();var kt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhbks"}}]),n}(mt);!function(){K.registerConstructor(kt,"MHBookSeries")}();var Ot=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhcbk"}}]),n}(mt);!function(){K.registerConstructor(Ot,"MHComicBook")}();var jt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhcbs"}}]),n}(mt);!function(){K.registerConstructor(jt,"MHComicBookSeries")}();var wt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgam"}}]),n}(mt);!function(){K.registerConstructor(wt,"MHGame")}();var Pt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgms"}}]),n}(mt);!function(){K.registerConstructor(Pt,"MHGameSeries")}();var St=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgnl"}}]),n}(mt);!function(){K.registerConstructor(St,"MHGraphicNovel")}();var Et=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgns"}}]),n}(mt);!function(){K.registerConstructor(Et,"MHGraphicNovelSeries")}();var Mt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhmov"}}]),n}(mt);!function(){K.registerConstructor(Mt,"MHMovie")}();var Tt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhmvs"}}]),n}(mt);!function(){K.registerConstructor(Tt,"MHMovieSeries")}();var Rt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhmsv"}}]),n}(mt);!function(){K.registerConstructor(Rt,"MHMusicVideo")}();var Ht=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhnov"}}]),n}(mt);!function(){K.registerConstructor(Ht,"MHNovella")}();var xt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhpdc"}}]),n}(mt);!function(){K.registerConstructor(xt,"MHPeriodical")}();var Ut=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhpds"}}]),n}(mt);!function(){K.registerConstructor(Ut,"MHPeriodicalSeries")}();var It=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsep"}}]),n}(mt);!function(){K.registerConstructor(It,"MHShowEpisode")}();var Nt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhssn"}}]),n}(mt);!function(){K.registerConstructor(Nt,"MHShowSeason")}();var At=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsss"}}]),n}(mt);!function(){K.registerConstructor(At,"MHShowSeries")}();var Lt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsng"}}]),n}(mt);!function(){K.registerConstructor(Lt,"MHTrack")}();var Ft=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhspc"}}]),n}(mt);!function(){K.registerConstructor(Ft,"MHSpecial")}();var _t=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsps"}}]),n}(mt);!function(){K.registerConstructor(_t,"MHSpecialSeries")}();var Bt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhtrl"}}]),n}(mt);!function(){K.registerConstructor(Bt,"MHTrailer")}();var Gt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"editMetaData",value:function(t,e){var n=this.subendpoint("update"),r={};return e?r={name:t,description:e}:t&&(r={name:t}),p({method:"PUT",endpoint:n,data:r}).then(function(t){return K.fetchByMhid(t.metadata.mhid)}).then(function(t){return pt.openSession&&pt.currentUser.fetchOwnedCollections("full",12,!0),t})}},{key:"addContent",value:function(t){return this.addContents([t])}},{key:"addContents",value:function(t){return this.changeContents(t,"add")}},{key:"removeContent",value:function(t){return this.removeContents([t])}},{key:"removeContents",value:function(t){return this.changeContents(t,"remove")}},{key:"changeContents",value:function(t,e){var n=this;if(!Array.isArray(t))throw new TypeError("Contents must be an array in changeContents");if("string"!=typeof e||"add"!==e&&"remove"!==e)throw new TypeError("Subendpoint must be add or remove");var r=this.subendpoint(e),o=t.map(function(t){if(t instanceof K){if(!(t instanceof q))return t.mhid;console.error("MHActions including like, favorite, create, and post cannot be collected. Please resubmit with actual content.")}else if("string"==typeof t&&K.prefixes.indexOf(K.getPrefixFromMhid(t))>-1)return t;return null}).filter(function(t){return null!==t});return this.mixlistPromise=null,o.length>-1?(i("content array to be submitted: ",o),this.content=p({method:"PUT",endpoint:r,data:{content:o}})["catch"](function(t){throw n.content=null,t}.bind(this)).then(function(e){return t.forEach(function(t){return"function"==typeof t.fetchSocial&&t.fetchSocial(!0)}),e})):void console.error("To add or remove content from a Collection the content array must include at least one MHObject")}},{key:"fetchOwners",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("owners");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchContent",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("content");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"fetchMixlist",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?20:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("mixlist");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:H,firstContentImage:{mapper:K.create},primaryOwner:{mapper:K.create}})}}],[{key:"createWithName",value:function(t,e){var n=this.rootSubendpoint("new"),r={};return t&&(r.name=t),e&&(r.description=e),p({method:"POST",endpoint:n,data:r}).then(function(t){return K.fetchByMhid(t.metadata.mhid)}).then(function(t){return pt.openSession&&pt.currentUser.fetchOwnedCollections("full",12,!0),t})}},{key:"MIXLIST_TYPE_NONE",get:function(){return"none"}},{key:"MIXLIST_TYPE_PARTIAL",get:function(){return"partial"}},{key:"MIXLIST_TYPE_FULL",get:function(){return"full"}},{key:"mhidPrefix",get:function(){return"mhcol"}},{key:"rootEndpoint",get:function(){return"graph/collection"}}]),n}(K);!function(){K.registerConstructor(Gt,"MHCollection")}();var Dt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:U})}}],[{key:"mhidPrefix",get:function(){return"mhimg"}},{key:"rootEndpoint",get:function(){return"graph/image"}}]),n}(K);!function(){K.registerConstructor(Dt,"MHImage")}();var Wt=function(){function t(n){e.classCallCheck(this,t),w(n,this)}return e.createClass(t,[{key:"jsonProperties",get:function(){return{next:String}}}]),t}(),Kt=function(){function t(n){e.classCallCheck(this,t),this.cachedNextResponse=null,this.fetchNextOperation=null,w(n,this)}return e.createClass(t,[{key:"fetchNext",value:function(){var t=this,e=this.cachedNextResponse;return e?new Promise(function(t){t(e)}):this.fetchNextOperation(this.pagingInfo.next).then(function(e){return t.cachedNextResponse=e,e})}},{key:"jsonProperties",get:function(){return{content:[it],pagingInfo:Wt}}},{key:"hasMorePages",get:function(){return void 0!==this.pagingInfo.next&&null!==this.pagingInfo.next}}]),t}(),qt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"fetchContent",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("content");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:F})}}],[{key:"rootEndpoint",get:function(){return"graph/trait"}}]),n}(K),Jt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgnr"}}]),n}(qt);!function(){K.registerConstructor(Jt,"MHGenre")}();var Yt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsgn"}}]),n}(qt);!function(){K.registerConstructor(Yt,"MHSubGenre")}();var zt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhmod"}}]),n}(qt);!function(){K.registerConstructor(zt,"MHMood")}();var Xt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhqlt"}}]),n}(qt);!function(){K.registerConstructor(Xt,"MHQuality")}();var Vt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhsty"}}]),n}(qt);!function(){K.registerConstructor(Vt,"MHStyleElement")}();var Qt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),
e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhstr"}}]),n}(qt);!function(){K.registerConstructor(Qt,"MHStoryElement")}();var $t=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhmts"}}]),n}(qt);!function(){K.registerConstructor($t,"MHMaterialSource")}();var Zt=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhthm"}}]),n}(qt);!function(){K.registerConstructor(Zt,"MHTheme")}();var te=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhach"}}]),n}(qt);!function(){K.registerConstructor(te,"MHAchievement")}();var ee=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhera"}}]),n}(qt);!function(){K.registerConstructor(ee,"MHEra")}();var ne=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhaud"}}]),n}(qt);!function(){K.registerConstructor(ne,"MHAudience")}();var re=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhflg"}}]),n}(qt);!function(){K.registerConstructor(re,"MHFlag")}();var oe=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,null,[{key:"mhidPrefix",get:function(){return"mhgrg"}}]),n}(qt);!function(){K.registerConstructor(oe,"MHGraphGenre")}();var ie=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"fetchMedia",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?12:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.subendpoint("media");return this.fetchPagedEndpoint(r,t,e,n)}},{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:A})}},{key:"isGroup",get:function(){return!this.isIndividual}},{key:"isFictional",get:function(){return!this.isReal}}],[{key:"rootEndpoint",get:function(){return"graph/contributor"}}]),n}(K),se=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"isIndividual",get:function(){return!0}},{key:"isReal",get:function(){return!0}}],[{key:"mhidPrefix",get:function(){return"mhric"}}]),n}(ie);!function(){K.registerConstructor(se,"MHRealIndividualContributor")}();var ue=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"isIndividual",get:function(){return!1}},{key:"isReal",get:function(){return!0}}],[{key:"mhidPrefix",get:function(){return"mhrgc"}}]),n}(ie);!function(){K.registerConstructor(ue,"MHRealGroupContributor")}();var ae=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"isIndividual",get:function(){return!0}},{key:"isReal",get:function(){return!1}}],[{key:"mhidPrefix",get:function(){return"mhfic"}}]),n}(ie);!function(){K.registerConstructor(ae,"MHFictionalIndividualContributor")}();var ce=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"isIndividual",get:function(){return!1}},{key:"isReal",get:function(){return!1}}],[{key:"mhidPrefix",get:function(){return"mhfgc"}}]),n}(ie);!function(){K.registerConstructor(ce,"MHFictionalGroupContributor")}();var le=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:N,subscriptions:[{mapper:K.create}]})}}],[{key:"fetchAllSources",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"full":arguments[0],e=arguments.length<=1||void 0===arguments[1]?100:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.rootSubendpoint("all");return this.fetchRootPagedEndpoint(r,{},t,e,n)}},{key:"rootEndpoint",get:function(){return"graph/source"}},{key:"mhidPrefix",get:function(){return"mhsrc"}}]),n}(K);!function(){K.registerConstructor(le,"MHSource")}();var he=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"jsonProperties",get:function(){return Object.assign({},e.get(Object.getPrototypeOf(n.prototype),"jsonProperties",this),{metadata:I})}}],[{key:"mhidPrefix",get:function(){return"mhsub"}},{key:"rootEndpoint",get:function(){return"graph/subscription"}}]),n}(K);!function(){K.registerConstructor(he,"MHSubscription")}();var fe=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"fetchResultsForSearchTerm",value:function(e,n){var r,o=arguments.length<=2||void 0===arguments[2]?12:arguments[2],i=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s="search/all/"+p.extraEncode(e);if(i)r=p({method:"GET",url:i});else{var u={pageSize:o};Array.isArray(n)&&-1===n.indexOf(t.SCOPE_ALL)&&(u.types=n),r=p({method:"GET",endpoint:s,params:u})}return r.then(function(t){var r=this,i=new Kt(t);return i.fetchNextOperation=function(t){return r.fetchResultsForSearchTerm(e,n,o,t)},i})}},{key:"SCOPE_ALL",get:function(){return"all"}},{key:"SCOPE_MOVIE",get:function(){return"movie"}},{key:"SCOPE_TRACK",get:function(){return"track"}},{key:"SCOPE_ALBUM",get:function(){return"album"}},{key:"SCOPE_SHOWSERIES",get:function(){return"showseries"}},{key:"SCOPE_SHOWSEASON",get:function(){return"showseason"}},{key:"SCOPE_SHOWEPISODE",get:function(){return"showepisode"}},{key:"SCOPE_BOOK",get:function(){return"book"}},{key:"SCOPE_GAME",get:function(){return"game"}},{key:"SCOPE_COLLECTION",get:function(){return"collection"}},{key:"SCOPE_USER",get:function(){return"user"}},{key:"SCOPE_CONTRIBUTOR",get:function(){return"contributor"}}]),t}(),ge={get MHSDK(){return C},get MHObject(){return K},get MHRelationalPair(){return it},get MHAction(){return q},get MHAdd(){return J},get MHComment(){return Y},get MHCreate(){return z},get MHLike(){return X},get MHFollow(){return V},get MHPost(){return Q},get MHHashtag(){return $},get MHUser(){return st},get MHLoginSession(){return pt},get MHSocial(){return S},get MHMedia(){return mt},get MHAlbum(){return yt},get MHAlbumSeries(){return bt},get MHAnthology(){return vt},get MHBook(){return Ct},get MHBookSeries(){return kt},get MHComicBook(){return Ot},get MHComicBookSeries(){return jt},get MHGame(){return wt},get MHGameSeries(){return Pt},get MHGraphicNovel(){return St},get MHGraphicNovelSeries(){return Et},get MHMovie(){return Mt},get MHMovieSeries(){return Tt},get MHMusicVideo(){return Rt},get MHNovella(){return Ht},get MHPeriodical(){return xt},get MHPeriodicalSeries(){return Ut},get MHShowEpisode(){return It},get MHShowSeason(){return Nt},get MHShowSeries(){return At},get MHTrack(){return Lt},get MHSpecial(){return Ft},get MHSpecialSeries(){return _t},get MHTrailer(){return Bt},get MHCollection(){return Gt},get MHImage(){return Dt},get MHContext(){return ot},get MHMetadata(){return M},get MHTrait(){return qt},get MHGenre(){return Jt},get MHSubGenre(){return Yt},get MHMood(){return zt},get MHQuality(){return Xt},get MHStyleElement(){return Vt},get MHStoryElement(){return Qt},get MHMaterialSource(){return $t},get MHTheme(){return Zt},get MHAchievement(){return te},get MHEra(){return ee},get MHAudience(){return ne},get MHFlag(){return re},get MHGraphGenre(){return oe},get MHContributor(){return ie},get MHRealIndividualContributor(){return se},get MHRealGroupContributor(){return ue},get MHFictionalIndividualContributor(){return ae},get MHFictionalGroupContributor(){return ce},get MHSource(){return le},get MHSubscription(){return he},get MHSourceFormat(){return Z},get MHSourceMethod(){return tt},get MHSourceMedium(){return et},get MHSearch(){return fe}};return ge});